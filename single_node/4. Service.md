## ğŸŒ Service

**Service** adalah objek Kubernetes yang memberikan akses jaringan tetap ke satu atau lebih Pod.
Karena IP Pod bisa berubah setiap kali Pod dibuat ulang, Service berperan sebagai DNS dan load balancer internal di dalam cluster.

---

Sederhananya:
- Pod = menjalankan aplikasi
- Service = cara mengakses aplikasi tersebut

---

## ğŸ§± Jenis-jenis Service

| Tipe                    | Fungsi                                               | Akses dari luar cluster                 |
| ----------------------- | ---------------------------------------------------- | --------------------------------------- |
| **ClusterIP** (default) | Hanya untuk komunikasi internal antar Pod            | âŒ Tidak bisa dari luar                  |
| **NodePort**            | Membuka port di node host                            | âœ… Bisa dari luar (pakai IP node & port) |
| **LoadBalancer**        | Menggunakan load balancer dari cloud (AWS, GCP, dll) | âœ… Bisa dari luar (dengan IP publik)     |


## ğŸ§© Membuat Service
Untuk selanjutnya kita tidak lagi melakukan pembuatan objek menggunakan cara imperatif, sebagai gantinya kita menggunakan cara deklaratif karena sudah mulai kompleks

### ğŸ“„ Contoh 1: Service ClusterIP (default)
```yaml
apiVersion: v1                     # Versi API untuk Service
kind: Service                      # Jenis resource Kubernetes
metadata:
  name: webapp                     # Nama Service
spec:
  type: ClusterIP                  # Jenis Service (hanya bisa diakses internal cluster)
  selector:
    app: webapp                    # Label target Pod (harus sama dengan Pod/Deployment)
  ports:
  - port: 80                       # Port yang dipublikasikan oleh Service (akses internal)
    targetPort: 80                 # Port di dalam container Pod tujuan

```

---

Service ini hanya bisa diakses antar-Pod dalam cluster, misalnya dari Pod lain via curl http://webapp:80.

---
### ğŸ“„ Contoh 2: Service NodePort (akses dari luar)
```yaml
apiVersion: v1                     # Versi API untuk Service
kind: Service                      # Resource Kubernetes untuk Service
metadata:
  name: webapp                     # Nama Service
spec:
  type: NodePort                   # Jenis Service: buka port di node host
  selector:
    app: webapp                    # Label Pod yang akan diakses
  ports:
  - port: 80                       # Port di dalam cluster (Service Port)
    targetPort: 80                 # Port di dalam container Pod
    nodePort: 30080                # Port tetap di node host (30000â€“32767)
```

---

Sekarang kamu bisa akses langsung dari luar dengan:

```
curl http://<IP_PUBLIC_VPS>:30080
```
---

## ğŸ” Mengecek Service

```
kubectl get svc
kubectl get svc -o wide
```

## ğŸ§  Hubungan antara Pod, Deployment, dan Service

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Deployment   â”‚  --->  â”‚   Service    â”‚  --->  â”‚   Pod    â”‚
â”‚ (webapp)     â”‚        â”‚ (webapp-svc) â”‚        â”‚ (nginx)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

## ğŸ§¹ Menghapus Service
```
kubectl delete -f webapp-service.yaml
```

## ğŸ’¡ Tips Praktis

---

- âœ… Gunakan ClusterIP untuk komunikasi antar-komponen internal (misalnya API â†” Database).
- âœ… Gunakan NodePort hanya untuk latihan atau lokal testing.
- âœ… Gunakan Ingress (Traefik) untuk akses HTTP/HTTPS publik di port 80/443.
- âœ… Label antara Deployment dan Service harus cocok (app: webapp).

---