## ğŸŒ Apa itu Ingress

Ingress adalah gateway HTTP/HTTPS di Kubernetes.
Ia bekerja di **layer 7 (Application Layer)**, dan tugasnya adalah:

---
- â¡ï¸ **menerima trafik dari luar (port 80/443)**
- â¡ï¸ **mendistribusikan ke Service di dalam cluster berdasarkan path atau domain**.

---

---

Jadi Ingress itu seperti reverse proxy atau web router bawaan Kubernetes.
Biasanya dijalankan oleh â€œcontrollerâ€ seperti **Traefik**, **NGINX Ingress Controller**, atau **HAProxy**.

---

## âš™ï¸ Kenapa butuh Ingress padahal Service bisa expose port juga?

| Aspek                   | Service (NodePort / LoadBalancer)     | Ingress                                             |
| ----------------------- | ------------------------------------- | --------------------------------------------------- |
| **Layer**               | Layer 4 (TCP/UDP)                     | Layer 7 (HTTP/HTTPS)                                |
| **Fungsi utama**        | Buka port ke luar cluster             | Routing HTTP/HTTPS berdasarkan domain/path          |
| **Port yang digunakan** | Random (30000â€“32767) atau 1 port LB   | 80 / 443 (standar web)                              |
| **Routing**             | Satu Service = satu port              | Satu Ingress bisa untuk banyak Service              |
| **SSL/TLS (HTTPS)**     | Harus diatur manual di setiap Service | Otomatis diatur di satu tempat (Ingress Controller) |
| **Skalabilitas**        | Tidak efisien kalau banyak aplikasi   | Sangat efisien (satu IP untuk semua aplikasi)       |


## ğŸ“– Singkatnya:

---

- Service (NodePort/LoadBalancer) bagus untuk expose cepat satu app.
- Ingress bagus untuk kelola banyak aplikasi lewat satu IP/domain.

---

## ğŸ§© Cara kerja alurnya

```
Internet (HTTP/HTTPS)
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ingress Controller  â”‚ (Traefik / NGINX)
â”‚ listens on :80/:443 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ingress Rules (routing)  â”‚
â”‚ / â†’ webapp-service       â”‚
â”‚ /nginx â†’ mynginx-service â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Services   â”‚ (ClusterIP)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pods       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“„ Contoh YAML: Ingress untuk dua aplikasi
1. Buat file .yaml
```yaml
apiVersion: networking.k8s.io/v1       # Versi API untuk Ingress
kind: Ingress                          # Jenis resource Kubernetes
metadata:
  name: demo-ingress                   # Nama Ingress
spec:
  ingressClassName: traefik            # Gunakan Traefik sebagai Ingress Controller
  rules:                               # Aturan routing HTTP
  - http:
      paths:
      - path: /                        # Semua request ke "/" diarahkan ke webapp
        pathType: Prefix
        backend:
          service:
            name: webapp               # Nama Service tujuan
            port:
              number: 80               # Port Service tujuan
      - path: /nginx                   # Semua request ke "/nginx" diarahkan ke mynginx
        pathType: Prefix
        backend:
          service:
            name: mynginx              # Service tujuan lain
            port:
              number: 80

```
2. Jalankan perintah:
```
kubectl apply -f ingress.yaml
```

## ğŸ’¡ Cek hasilnya
```
kubectl get ingress -o wide
```


## ğŸ§  Kesimpulan Perbedaan Inti

| Kebutuhan                                       | Gunakan                |
| ----------------------------------------------- | ---------------------- |
| Satu app sederhana                              | **Service (NodePort)** |
| Banyak app di 1 server                          | **Ingress**            |
| Butuh HTTPS otomatis                            | **Ingress**            |
| Butuh routing berdasarkan domain/subdomain      | **Ingress**            |
| Butuh akses TCP/UDP non-HTTP (contoh: database) | **Service**            |
